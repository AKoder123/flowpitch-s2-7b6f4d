/* Root theme */
:root {
  --bg0: #050611;
  --bg1: #0b0f1a;
  --bg2: #0e1530;
  --panel: rgba(15, 20, 40, 0.7);
  --text: rgba(255,255,255,.92);
  --muted: rgba(255,255,255,.64);
  --soft: rgba(255,255,255,.12);
  --line: rgba(141, 166, 255, 0.18);
  --shadow: 0 20px 60px rgba(0,0,0,.45), 0 2px 8px rgba(0,0,0,.35);

  --accentGrad: linear-gradient(135deg, #66c3ff 0%, #3b82f6 45%, #7aa2ff 90%);
  --accentGlow: 0 0 0 1px rgba(88,140,255,.18), 0 6px 24px rgba(88,140,255,.22);

  --topOffset: 64px; /* set by JS */

  /* Typography scale tokens with auto-scale multiplier */
  --textScale: 1;
  --h1Size: calc(clamp(32px, 7.2vw, 72px) * var(--textScale));
  --h2Size: calc(clamp(26px, 4.8vw, 44px) * var(--textScale));
  --h3Size: calc(clamp(20px, 3.2vw, 28px) * var(--textScale));
  --bodySize: calc(clamp(16px, 1.35vw, 20px) * var(--textScale)); /* >=16px base */
  --bulletSize: var(--bodySize); /* equal here to respect min legibility */

  --spacing-xl: clamp(28px, 5dvh, 72px);
  --spacing-lg: clamp(20px, 3.5dvh, 40px);
  --spacing-md: clamp(16px, 2.5dvh, 28px);
  --spacing-sm: 12px;

  --radius-lg: 18px;
  --radius-md: 14px;
  --radius-sm: 10px;
}

html, body {
  height: 100%;
  background: radial-gradient(1200px 1200px at 10% -10%, #0a0f2a 0%, transparent 60%), radial-gradient(900px 900px at 110% 10%, #0a142a 0%, transparent 60%), var(--bg0);
  color: var(--text);
  font-family: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, 'Apple Color Emoji', 'Segoe UI Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Aurora background layers */
.bgLayer {
  position: fixed; inset: 0; pointer-events: none; z-index: 0; opacity: .75;
}
.bgLayer.bgA {
  background:
    radial-gradient(60vh 60vh at 10% 20%, rgba(58,123,213,.22), transparent 60%),
    radial-gradient(80vh 80vh at 85% 10%, rgba(88,140,255,.20), transparent 60%),
    radial-gradient(70vh 70vh at 30% 85%, rgba(29,78,216,.18), transparent 60%);
  filter: blur(24px) saturate(120%);
}
.bgLayer.bgB {
  background:
    conic-gradient(from 210deg at 50% 50%, rgba(126,214,255,.05), rgba(0,0,0,0) 40%, rgba(180,200,255,.06) 60%, rgba(0,0,0,0) 80%);
  mix-blend-mode: screen;
  opacity: .5;
  filter: blur(18px);
}

/* Gradient text */
.grad { background: var(--accentGrad); -webkit-background-clip: text; background-clip: text; color: transparent; }

/* Top navigation */
.topNav { position: fixed; top: 0; left: 0; right: 0; z-index: 50; backdrop-filter: saturate(140%) blur(14px); background: linear-gradient(to bottom, rgba(10,12,24,.78), rgba(10,12,24,.48)); border-bottom: 1px solid var(--line); padding-top: max(8px, env(safe-area-inset-top)); }
.topNav .navInner { display: flex; align-items: center; justify-content: space-between; gap: 12px; padding: 10px 16px; }
.brand { display: flex; align-items: center; gap: 10px; font-weight: 700; letter-spacing: .2px; }
.logoDot { width: 12px; height: 12px; border-radius: 50%; background: var(--accentGrad); box-shadow: var(--accentGlow); display: inline-block; }
.brandText { font-size: 14px; color: var(--muted); }

.navActions { display: flex; align-items: center; gap: 10px; }
.navBtn { appearance: none; cursor: pointer; font-weight: 600; font-size: 13px; color: var(--text); padding: 8px 12px; border-radius: 10px; background: rgba(255,255,255,.04); border: 1px solid var(--line); box-shadow: 0 1px 0 rgba(255,255,255,.08) inset; transition: background .2s ease, transform .08s ease; }
.navBtn:hover { background: rgba(255,255,255,.08); }
.navBtn:active { transform: translateY(1px); }

.sep { width: 1px; height: 24px; background: var(--line); }

.ctaGrad { appearance: none; cursor: pointer; font-weight: 700; font-size: 13px; color: #0c1220; padding: 9px 14px; border-radius: 999px; border: none; background: var(--accentGrad); box-shadow: var(--accentGlow); transition: filter .2s ease, transform .08s ease; }
.ctaGrad:hover { filter: brightness(1.05); }
.ctaGrad:active { transform: translateY(1px); }

/* Progress UI */
#topProgress { position: fixed; left: 0; right: 0; height: 3px; top: var(--topOffset); z-index: 45; pointer-events: none; }
#topProgressBar { height: 100%; width: 0%; background: var(--accentGrad); box-shadow: 0 0 14px rgba(90,140,255,.35); transition: width .35s ease; }

#sideDots { position: fixed; right: 14px; top: 50%; transform: translateY(-50%); display: flex; flex-direction: column; gap: 8px; z-index: 44; pointer-events: none; }
#sideDots button { pointer-events: auto; width: 8px; height: 8px; border-radius: 50%; background: rgba(255,255,255,.28); border: 1px solid rgba(255,255,255,.18); box-shadow: 0 1px 0 rgba(255,255,255,.12) inset; padding: 0; cursor: pointer; transition: transform .2s ease, background .2s ease, box-shadow .2s ease; }
#sideDots button[aria-current="true"] { background: var(--accentGrad); box-shadow: var(--accentGlow); transform: scale(1.25); }
@media (max-width: 540px) { #sideDots { right: 8px; opacity: .66; } #sideDots button { width: 6px; height: 6px; } }

/* Deck */
#deck { position: relative; z-index: 2; padding-top: var(--topOffset); }
.slides { scroll-snap-type: y mandatory; overflow-y: auto; height: calc(100dvh - var(--topOffset)); -webkit-overflow-scrolling: touch; }
.slide { position: relative; scroll-snap-align: start; scroll-margin-top: var(--topOffset); min-height: calc(100dvh - var(--topOffset)); display: grid; place-items: center; padding: clamp(12px, 2.2vw, 28px); }

.slideInner { width: min(1120px, 92vw); background: linear-gradient(180deg, rgba(255,255,255,.028), rgba(255,255,255,.01)); border: 1px solid var(--line); border-radius: var(--radius-lg); box-shadow: var(--shadow); padding: clamp(18px, 4.8dvh, 48px) clamp(18px, 4.8dvw, 56px); backdrop-filter: blur(10px) saturate(120%); position: relative; overflow: hidden; }
.slideInner:before { content: ""; position: absolute; inset: 0; pointer-events: none; background: radial-gradient(60% 120% at 80% -20%, rgba(90,140,255,.12), transparent 50%), radial-gradient(80% 100% at -10% 110%, rgba(75,200,255,.08), transparent 50%); }

.header { margin-bottom: var(--spacing-lg); max-width: 68ch; }
.header h1, .header h2 { line-height: 1.08; letter-spacing: -0.01em; margin: 0 0 10px 0; }
.header h1 { font-size: var(--h1Size); }
.header h2 { font-size: var(--h2Size); }
.header p.sub { color: var(--muted); font-size: var(--h3Size); margin: 8px 0 0 0; max-width: 64ch; }

.s-body { display: grid; gap: var(--spacing-md); font-size: var(--bodySize); line-height: 1.5; max-width: 72ch; overflow: auto; overscroll-behavior: contain; }

ul.bullets { list-style: none; padding: 0; margin: 0; display: grid; gap: 8px; }
ul.bullets li { position: relative; padding-left: 16px; font-size: var(--bulletSize); }
ul.bullets li:before { content: ""; position: absolute; left: 0; top: .7em; width: 8px; height: 8px; border-radius: 50%; background: var(--accentGrad); box-shadow: 0 0 0 1px rgba(88,140,255,.22); }

/* Content layout: optional 2-col on wide */
.contentGrid { display: grid; gap: var(--spacing-lg); }
@media (min-width: 1000px) {
  .slide--content .contentGrid { grid-template-columns: 1.35fr .9fr; align-items: start; }
}

.card { background: rgba(12,16,30,.5); border: 1px solid var(--line); border-radius: var(--radius-md); padding: 14px 16px; box-shadow: 0 6px 30px rgba(0,0,0,.28) inset, 0 10px 30px rgba(0,0,0,.25); }
.callout { background: linear-gradient(180deg, rgba(88,140,255,.12), rgba(88,140,255,.03)); border: 1px solid rgba(120,160,255,.22); box-shadow: var(--accentGlow); }
.callout .label { font-size: 12px; letter-spacing: .12em; text-transform: uppercase; color: rgba(200,220,255,.78); margin-bottom: 6px; display: inline-block; }

.note { color: var(--muted); font-size: calc(var(--bodySize) * .95); }

/* Animations */
[data-animate] { opacity: 0; transform: translateY(10px); filter: blur(0px); transition: opacity .5s cubic-bezier(.2,.65,.3,1), transform .5s cubic-bezier(.2,.65,.3,1), filter .5s ease; }
.is-active [data-animate] { opacity: 1; transform: none; filter: none; }

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {
  * { scroll-behavior: auto !important; }
  [data-animate], .is-active [data-animate] { opacity: 1 !important; transform: none !important; filter: none !important; transition: none !important; }
}

/* Compact mode for short heights */
body[data-compact="true"] :root {}
body[data-compact="true"] .slideInner { padding: clamp(14px, 3.6dvh, 36px) clamp(14px, 3.6dvw, 40px); }
body[data-compact="true"] { --textScale: .94; }
@media (max-height: 720px) {
  body { --textScale: .96; }
}

/* PDF Export stage */
#pdfStage { position: fixed; left: -10000px; top: 0; width: 1920px; height: 1080px; overflow: hidden; background: #050611; z-index: -1; }
#pdfStage .topNav, #pdfStage #topProgress, #pdfStage #sideDots { display: none !important; }
#pdfStage .slide { min-height: 1080px; }
#pdfStage .slideInner { width: 1920px; height: 1080px; padding: 90px 96px; border-radius: 0; }

/* Hide progress UI during export to avoid artifacts */
body.exportingPdf #topProgress, body.exportingPdf #sideDots { opacity: 0; }

/* Force animations visible during export; and gradient text fallback */
body.exportingPdf [data-animate] { opacity: 1 !important; transform: none !important; filter: none !important; transition: none !important; }
body.exportingPdf .grad { background: none !important; -webkit-background-clip: initial !important; background-clip: initial !important; color: rgba(255,255,255,.92) !important; }
